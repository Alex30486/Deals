<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@vapi-ai/web@latest/dist/vapi.browser.js"></script>
    <style>
        body { background: #050505; color: #fff; font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
        .log-window { background: #000; border: 1px solid #1a1a1a; font-family: 'JetBrains Mono', monospace; font-size: 10px; color: #34d399; }
        .glass-card { background: rgba(20, 20, 25, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.05); }
    </style>
</head>
<body class="p-8">
    <div class="max-w-6xl mx-auto">
        <header class="flex justify-between items-center mb-12 border-b border-zinc-800 pb-8">
            <div>
                <h1 class="text-3xl font-black italic text-blue-500 tracking-tighter">ELARA <span class="text-white">COMMAND</span></h1>
                <p class="text-zinc-500 text-[10px] font-bold uppercase tracking-[0.3em]">Full-Stack Acquisition v20.0</p>
            </div>
            <div class="flex gap-4">
                <button onclick="startUnlockerProcess()" class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-lg shadow-blue-500/20">
                    Run Heavy Lift
                </button>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div id="results" class="lg:col-span-2 space-y-4 h-[75vh] overflow-y-auto pr-2">
                <div class="text-zinc-700 italic border-2 border-dashed border-zinc-900 rounded-3xl p-20 text-center">
                    Run Python Scrubber & Click "Heavy Lift" to Populate.
                </div>
            </div>
            
            <div class="flex flex-col gap-4">
                <div class="log-window p-6 rounded-3xl h-[50vh] overflow-y-auto">
                    <p class="text-zinc-500 mb-4 font-bold">// SYSTEM_LOGS</p>
                    <div id="log-content"></div>
                </div>
                
                <div class="bg-zinc-900 p-6 rounded-3xl border border-zinc-800">
                    <h3 class="text-xs font-bold text-zinc-500 uppercase mb-4">VoIP Bridge Status</h3>
                    <div id="call-status" class="text-sm font-mono text-zinc-400 italic">No Active Call</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const vapi = new Vapi('YOUR_VAPI_PUBLIC_KEY'); // Insert your Vapi Public Key

        async function startUnlockerProcess() {
            const results = document.getElementById('results');
            const log = document.getElementById('log-content');
            log.innerHTML += `<div>[SYSTEM]: Fetching Healed Database...</div>`;
            
            try {
                const response = await fetch('database.json');
                const leads = await response.json();
                results.innerHTML = "";

                for (const lead of leads) {
                    log.innerHTML += `<div>[API]: Unlocking ${lead.owner}...</div>`;

                    // PULLING DATA VIA BRIGHT DATA UNLOCKER
                    // (Simulated logic using your script parameters)
                    results.innerHTML += `
                        <div class="glass-card p-6 rounded-[2rem] hover:border-blue-500/50 transition-all slide-up">
                            <div class="flex justify-between items-start mb-4">
                                <span class="bg-blue-500/10 text-blue-400 text-[10px] font-bold px-3 py-1 rounded-full uppercase">Unlocked Lead</span>
                                <span class="text-zinc-600 text-[10px] mono">${lead.zip}</span>
                            </div>
                            <h3 class="text-xl font-bold mb-1">${lead.address}</h3>
                            <p class="text-zinc-400 text-sm mb-6">Owner: ${lead.owner}</p>
                            
                            <div class="flex gap-3">
                                <button onclick="makeCall('${lead.owner}', '${lead.address}')" 
                                        class="flex-1 bg-green-600 hover:bg-green-500 text-white py-3 rounded-xl font-bold text-xs uppercase tracking-widest transition-all">
                                    Call Owner
                                </button>
                                <button class="px-4 bg-zinc-800 text-zinc-400 rounded-xl hover:bg-zinc-700 transition-all">
                                    View Logic
                                </button>
                            </div>
                        </div>
                    `;
                    log.parentElement.scrollTop = log.parentElement.scrollHeight;
                }
            } catch (err) {
                log.innerHTML += `<div class="text-red-500 font-bold">[CRITICAL]: Database not found. Run Python first.</div>`;
            }
        }

        function makeCall(name, address) {
            const status = document.getElementById('call-status');
            status.innerHTML = `<span class="text-green-500 font-bold">Calling ${name}...</span>`;
            
            // Initiate the AI Call
            vapi.start({
                assistantId: 'YOUR_ASSISTANT_ID', // Replace with your Vapi Assistant ID
                assistantOverrides: {
                    variableValues: {
                        ownerName: name,
                        propertyAddress: address
                    }
                }
            });

            vapi.on('call-start', () => { status.innerText = "Call in progress..."; });
            vapi.on('call-end', () => { status.innerText = "Call completed."; });
        }
    </script>
</body>
</html>
